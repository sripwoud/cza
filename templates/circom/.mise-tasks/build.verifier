#!/usr/bin/env bash
#MISE alias="bv"
#MISE description="Build solidity verifier contract"
#MISE dir="circuits"
#MISE quiet=true

circuits() {
  dasel -f circuits.json 'keys().all()' -w -
}

main() {
  PS3="Build solidity verifier contract for circuit: "
  select circuit in $(circuits); do
      snarkjs zkey export solidityverifier "build/$circuit/groth16_pkey.zkey" "../contracts/src/Verifier_$circuit.sol"
      break
  done
}

main
